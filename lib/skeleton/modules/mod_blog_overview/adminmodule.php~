<?	
	global $Session;
	$mtpldir = 'skeleton/modules/mod_blog_overview/templates/';
	$GLOBALS['document']->addResource('stylesheet', $mtpldir . '../css/admin.css');
	
	if (!$Session->mod_blogoversikt_initialized)
	{
		$Session->set('mod_blogoversikt_initialized', 1);
	}
	
	switch($_REQUEST['modaction'])
	{
		case 'new':
			$mtpl = new cpTemplate($mtpldir . 'adm_blogoversikt.php');
			$mtpl->blogs =& $blogs;
			$mtpl->amounts =& $amounts;
			$mtpl->datamixed = $field->DataMixed;
			die ($mtpl->render());
			break;
					
		case 'executeadd':
			$db =& dbObject::globalValue('database');
			$blogpages = array();
			$amounts = array();
			$datamixed = $_POST['page'] . '#' . $_POST['amounts'];
			$field->DataMixed = $datamixed;
			$field->save ();
			break;

		case 'standard':
		default:
			$mtpl = new cPTemplate($mtpldir . 'adm_main.php');
			$std = new cPTemplate($mtpldir . 'adm_std.php');
			$mtpl->standard = $std->render ( );
			if ($_REQUEST['modaction'] == 'standard')
				die ($std->render());
			break;
	}
	
	if ($mtpl)
		$module = $mtpl->render();
?>
